{
	"name": "Home",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "Facebook"
		},
		{
			"eventType": "variable",
			"name": "apiUrlHome",
			"type": "string",
			"initialValue": "https://api.snakecity.io/api/",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 283243689014572
		},
		{
			"eventType": "variable",
			"name": "tempDataHome",
			"type": "string",
			"initialValue": "",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 930142411787026
		},
		{
			"eventType": "variable",
			"name": "userDataHome",
			"type": "string",
			"initialValue": "",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 416563511895258
		},
		{
			"eventType": "variable",
			"name": "tokenHome",
			"type": "string",
			"initialValue": "",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 784034012559728
		},
		{
			"eventType": "variable",
			"name": "turnNemberHome",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 114477631630298
		},
		{
			"eventType": "variable",
			"name": "turnLimitHome",
			"type": "number",
			"initialValue": "5",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 821527818694915
		},
		{
			"eventType": "variable",
			"name": "walletIDHome",
			"type": "string",
			"initialValue": "",
			"comment": "WalletID of User",
			"isStatic": false,
			"isConstant": false,
			"sid": 142672469327137
		},
		{
			"eventType": "comment",
			"text": "It is good practice to have global constants for the game name, instance name and room name if they do not change. This means there is only one place we need to update our project if we wanted to change any of them."
		},
		{
			"eventType": "variable",
			"name": "Game_Name2",
			"type": "string",
			"initialValue": "snakecity.pvp",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 274080758819413
		},
		{
			"eventType": "variable",
			"name": "Instance_Name2",
			"type": "string",
			"initialValue": "default",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 638381634651754
		},
		{
			"eventType": "variable",
			"name": "Room_Name2",
			"type": "string",
			"initialValue": "",
			"comment": "main",
			"isStatic": false,
			"isConstant": true,
			"sid": 890779751986679
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 756064228003939
				}
			],
			"actions": [
				{
					"id": "reset-global-variables",
					"objectClass": "System",
					"sid": 339513252770038
				},
				{
					"id": "request-fullscreen",
					"objectClass": "Browser",
					"sid": 740111581097360,
					"parameters": {
						"mode": "stretch-letterbox-scale",
						"navigation-ui": "show"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 288816321148185,
					"parameters": {
						"variable": "Style_Background",
						"value": "choose(0,1,2)"
					}
				},
				{
					"id": "pin-to-object",
					"objectClass": "show_effect2",
					"sid": 968861123205657,
					"behaviorType": "Pin",
					"parameters": {
						"pin-to": "logo_home",
						"mode": "position-angle"
					}
				},
				{
					"id": "set-visible",
					"objectClass": "btn_home_buy_turn",
					"sid": 137353335539468,
					"parameters": {
						"visibility": "invisible"
					}
				},
				{
					"id": "set-visible",
					"objectClass": "TXT_HOME_ALERT_NO_TURN",
					"sid": 465965221883157,
					"parameters": {
						"visibility": "invisible"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 450509810137858,
					"parameters": {
						"variable": "walletIDHome",
						"value": "Browser.QueryParam(\"walletID\")"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 329148929006068,
					"parameters": {
						"variable": "tokenHome",
						"value": "Browser.QueryParam(\"token\")"
					}
				},
				{
					"id": "set-request-header",
					"objectClass": "AJAX",
					"sid": 465035170034723,
					"parameters": {
						"header": "\"Authorization\"",
						"value": "\"Bearer \"&tokenHome"
					}
				},
				{
					"id": "set-request-header",
					"objectClass": "AJAX",
					"sid": 554721839370568,
					"parameters": {
						"header": "\"Access-Control-Allow-Origin: *\"",
						"value": "\"*\""
					}
				},
				{
					"id": "request-url",
					"objectClass": "AJAX",
					"sid": 120521436791836,
					"parameters": {
						"tag": "\"GetTurnLimitHome\"",
						"url": "apiUrlHome&\"turns/\"&walletIDHome"
					}
				},
				{
					"type": "comment",
					"text": "Multi Players Starting"
				},
				{
					"id": "set-text",
					"objectClass": "ActivityLog",
					"sid": 213999523020788,
					"parameters": {
						"text": "\"Connecting to Server\""
					}
				},
				{
					"type": "comment",
					"text": "Connect to server where is socket already setup and listening for each players"
				},
				{
					"id": "connect",
					"objectClass": "Multiplayer",
					"sid": 816458457405208,
					"parameters": {
						"server": "\"https://socket.snakecity.io\""
					}
				}
			],
			"sid": 425242840821894,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 675488872827863,
							"parameters": {
								"variable": "Style_Background",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "TiledBackground",
							"sid": 256099393126980,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "TiledBackground2",
							"sid": 683608596991042,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "TiledBackground3",
							"sid": 917397086601675,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 777590708212039
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 312731210455840,
							"parameters": {
								"variable": "Style_Background",
								"comparison": 0,
								"value": "1"
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "TiledBackground2",
							"sid": 693578132531854,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "TiledBackground",
							"sid": 910715536486399,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "TiledBackground3",
							"sid": 315778638942182,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 222020457036863
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 318751960919253,
							"parameters": {
								"variable": "Style_Background",
								"comparison": 0,
								"value": "2"
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "TiledBackground3",
							"sid": 895403224277406,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "TiledBackground2",
							"sid": 193465419846201,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "TiledBackground",
							"sid": 478520986570862,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 805173335433891
				}
			]
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Signalling Process2",
			"description": "Multi Players Flow",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "message",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 624002175245522
				},
				{
					"functionName": "Addlog2",
					"functionDescription": "Write activity to logs",
					"functionCategory": "Logs",
					"functionReturnType": "any",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "ActivityLog",
							"sid": 309106859139249,
							"parameters": {
								"text": "Self.Text & newline"
							}
						},
						{
							"id": "scroll-to-bottom",
							"objectClass": "ActivityLog",
							"sid": 359654949788566
						}
					],
					"sid": 665395973452762
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-connected",
							"objectClass": "Multiplayer",
							"sid": 451130865864051
						}
					],
					"actions": [
						{
							"id": "call-function",
							"objectClass": "Function",
							"sid": 605589605292945,
							"parameters": {
								"name": "\"AddLog\"",
								"parameter-n": [
									"message"
								]
							}
						},
						{
							"id": "log-in",
							"objectClass": "Multiplayer",
							"sid": 167226286405497,
							"parameters": {
								"alias": "walletID"
							}
						}
					],
					"sid": 113087416477552
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-logged-in",
							"objectClass": "Multiplayer",
							"sid": 807379803918374
						}
					],
					"actions": [
						{
							"id": "call-function",
							"objectClass": "Function",
							"sid": 275539483467249,
							"parameters": {
								"name": "\"AddLog\"",
								"parameter-n": [
									"message"
								]
							}
						}
					],
					"sid": 751876329517288
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-joined-room",
							"objectClass": "Multiplayer",
							"sid": 279023825999529
						}
					],
					"actions": [
						{
							"id": "set-read-only",
							"objectClass": "ChatText",
							"sid": 519243352433633,
							"parameters": {
								"mode": "not-read-only"
							}
						},
						{
							"id": "set-focused",
							"objectClass": "ChatText",
							"sid": 876311442909503
						},
						{
							"id": "set-enabled",
							"objectClass": "SendBtn",
							"sid": 326396992648710,
							"parameters": {
								"mode": "enabled"
							}
						}
					],
					"sid": 601653268019759,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-host",
									"objectClass": "Multiplayer",
									"sid": 803580873343870
								}
							],
							"actions": [
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 951361464352793,
									"parameters": {
										"group-name": "\"Host\"",
										"state": "activated"
									}
								},
								{
									"id": "call-function",
									"objectClass": "Function",
									"sid": 158681720798964,
									"parameters": {
										"name": "\"AddLog\"",
										"parameter-n": [
											"message"
										]
									}
								},
								{
									"id": "add-item",
									"objectClass": "PeerList",
									"sid": 665373890209840,
									"parameters": {
										"text": "Multiplayer.MyAlias"
									}
								}
							],
							"sid": 782170129368162
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 584314715351443
								}
							],
							"actions": [
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 504563550217811,
									"parameters": {
										"group-name": "\"Peer\"",
										"state": "activated"
									}
								},
								{
									"id": "call-function",
									"objectClass": "Function",
									"sid": 900228036352504,
									"parameters": {
										"name": "\"AddLog\"",
										"parameter-n": [
											"message"
										]
									}
								},
								{
									"id": "add-item",
									"objectClass": "PeerList",
									"sid": 541286534656599,
									"parameters": {
										"text": "Multiplayer.MyAlias"
									}
								}
							],
							"sid": 707756439894488
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-left-room",
							"objectClass": "Multiplayer",
							"sid": 707044375939157
						}
					],
					"actions": [
						{
							"id": "call-function",
							"objectClass": "Function",
							"sid": 778620130946016,
							"parameters": {
								"name": "\"AddLog\"",
								"parameter-n": [
									"message"
								]
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "ChatText",
							"sid": 161568304309155,
							"parameters": {
								"mode": "disabled"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "SendBtn",
							"sid": 793537873029126,
							"parameters": {
								"mode": "disabled"
							}
						},
						{
							"id": "clear",
							"objectClass": "PeerList",
							"sid": 257249226511006
						}
					],
					"sid": 159196498414723
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-disconnected",
							"objectClass": "Multiplayer",
							"sid": 478346964974710
						}
					],
					"actions": [
						{
							"id": "call-function",
							"objectClass": "Function",
							"sid": 894041041169751,
							"parameters": {
								"name": "\"AddLog\"",
								"parameter-n": [
									"message"
								]
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "ChatText",
							"sid": 641103261375662,
							"parameters": {
								"mode": "disabled"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "SendBtn",
							"sid": 232357810301453,
							"parameters": {
								"mode": "disabled"
							}
						},
						{
							"id": "clear",
							"objectClass": "PeerList",
							"sid": 901263358047788
						}
					],
					"sid": 670292503142378
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-error",
							"objectClass": "Multiplayer",
							"sid": 573533813666121
						}
					],
					"actions": [
						{
							"id": "call-function",
							"objectClass": "Function",
							"sid": 714293479735532,
							"parameters": {
								"name": "\"AddLog\"",
								"parameter-n": [
									"message"
								]
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "ChatText",
							"sid": 333045508901756,
							"parameters": {
								"mode": "disabled"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "SendBtn",
							"sid": 162067107920164,
							"parameters": {
								"mode": "disabled"
							}
						},
						{
							"id": "clear",
							"objectClass": "PeerList",
							"sid": 551143786235230
						}
					],
					"sid": 711599287045085
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-peer-connected",
							"objectClass": "Multiplayer",
							"sid": 324107679712356
						}
					],
					"actions": [
						{
							"id": "call-function",
							"objectClass": "Function",
							"sid": 424235357468915,
							"parameters": {
								"name": "\"AddLog\"",
								"parameter-n": [
									"message"
								]
							}
						},
						{
							"id": "add-item",
							"objectClass": "PeerList",
							"sid": 124652269736948,
							"parameters": {
								"text": "Multiplayer.MyAlias"
							}
						}
					],
					"sid": 579023084389159
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-peer-disconnected",
							"objectClass": "Multiplayer",
							"sid": 563484025086980
						}
					],
					"actions": [
						{
							"id": "call-function",
							"objectClass": "Function",
							"sid": 725674892158506,
							"parameters": {
								"name": "\"AddLog\"",
								"parameter-n": [
									"message"
								]
							}
						}
					],
					"sid": 514241735339748,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 316564651407173,
									"parameters": {
										"count": "PeerList.ItemCount"
									}
								},
								{
									"id": "compare-item-text-at",
									"objectClass": "PeerList",
									"sid": 226547432755869,
									"parameters": {
										"index": "loopindex",
										"text-to-compare": "Multiplayer.PeerAlias",
										"case-sensitivity": "case-sensitive"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "To remove the right name we check every item in the list, and remove the item index where the item text matches the name of peer who left."
								},
								{
									"id": "remove",
									"objectClass": "PeerList",
									"sid": 953210628611439,
									"parameters": {
										"index": "loopindex"
									}
								}
							],
							"sid": 868727018324781
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-kicked",
							"objectClass": "Multiplayer",
							"sid": 258773459363621
						}
					],
					"actions": [
						{
							"id": "call-function",
							"objectClass": "Function",
							"sid": 199814961858733,
							"parameters": {
								"name": "\"AddLog\"",
								"parameter-n": [
									"message"
								]
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "ChatText",
							"sid": 686154286611809,
							"parameters": {
								"mode": "disabled"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "SendBtn",
							"sid": 688229427724808,
							"parameters": {
								"mode": "disabled"
							}
						},
						{
							"id": "clear",
							"objectClass": "PeerList",
							"sid": 424165114936136
						}
					],
					"sid": 396987854299182
				}
			],
			"sid": 556714869112452
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Game Started Home",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-completed",
							"objectClass": "AJAX",
							"sid": 159486310239005,
							"parameters": {
								"tag": "\"GetTurnLimitHome\""
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 283000314283801,
							"parameters": {
								"variable": "userDataHome",
								"value": "AJAX.LastData"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 161940414151347,
							"parameters": {
								"variable": "tempDataHome",
								"value": "tokenat(userDataHome,3,\",\")"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 143480669351403,
							"parameters": {
								"variable": "turnLimitHome",
								"value": "tokenat(tempDataHome,1,\":\")"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 768313577248067,
							"parameters": {
								"seconds": "0.1"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 451343326639882,
							"parameters": {
								"variable": "tempDataHome",
								"value": "tokenat(userDataHome,2,\",\")"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 676126894065885,
							"parameters": {
								"variable": "turnNemberHome",
								"value": "tokenat(tempDataHome,1,\":\")"
							}
						}
					],
					"sid": 687261994099647,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 489165609032851,
									"parameters": {
										"first-value": "turnNemberHome",
										"comparison": 5,
										"second-value": "turnLimitHome"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "btn_play",
									"sid": 653048118413341
								},
								{
									"id": "set-position",
									"objectClass": "btn_home_buy_turn",
									"sid": 920194231847017,
									"parameters": {
										"x": "434",
										"y": "402"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "btn_home_buy_turn",
									"sid": 374974310487973,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "TXT_HOME_ALERT_NO_TURN",
									"sid": 363488612853337,
									"parameters": {
										"visibility": "visible"
									}
								}
							],
							"sid": 402475929955094
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-touched-object",
							"objectClass": "Touch",
							"sid": 953270666550423,
							"parameters": {
								"object": "btn_home_buy_turn"
							}
						}
					],
					"actions": [
						{
							"id": "go-to-url",
							"objectClass": "Browser",
							"sid": 940151419889715,
							"parameters": {
								"url": "\"http://dashboard.snakecity.io/\"",
								"target": "parent"
							}
						}
					],
					"sid": 621392565782390
				}
			],
			"sid": 185190714676248
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-end-of-layout",
					"objectClass": "System",
					"sid": 544326725802454
				}
			],
			"actions": [
				{
					"id": "stop-all",
					"objectClass": "Audio",
					"sid": 682865493456088
				}
			],
			"sid": 665752584735035
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 907197372943440
				}
			],
			"actions": [
				{
					"id": "set-x",
					"objectClass": "moregamess",
					"sid": 215730582132568,
					"parameters": {
						"x": "ViewportRight(\"home\")-150"
					}
				},
				{
					"id": "set-y",
					"objectClass": "moregamess",
					"sid": 147950853092441,
					"parameters": {
						"y": "ViewportBottom(\"home\")-40"
					}
				}
			],
			"sid": 706443750076709
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-touched-object",
					"objectClass": "Touch",
					"sid": 453449069715378,
					"parameters": {
						"object": "btn_play"
					}
				}
			],
			"actions": [
				{
					"id": "play",
					"objectClass": "Audio",
					"sid": 835848442911430,
					"parameters": {
						"audio-file": "click",
						"loop": "not-looping",
						"volume": "0",
						"tag-optional": "\"\""
					}
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 781714601365388,
					"parameters": {
						"seconds": "0.2"
					}
				},
				{
					"id": "reset-global-variables",
					"objectClass": "System",
					"sid": 952993831458895
				},
				{
					"id": "go-to-layout",
					"objectClass": "System",
					"sid": 987133825644738,
					"parameters": {
						"layout": "Game"
					}
				}
			],
			"sid": 135603862217175
		}
	],
	"sid": 353680609505884
}